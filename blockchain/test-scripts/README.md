# 跨域认证系统测试工具包

这是一套完整的跨域认证系统测试工具包，包含自动化测试工具、详细测试指南和快速启动脚本。

## 🚀 快速开始

### 1. 准备环境
确保您的系统已安装：
- Java 8+ 
- Spring Boot应用正常运行在端口8080

### 2. 启动应用
```bash
# 方法1：使用Maven
./mvnw spring-boot:run

# 方法2：使用JAR包
java -jar target/blockchain-voting-system-1.0.jar

# 方法3：在IDE中运行主类
# 运行 com.bjut.blockchain.BlockchainVotingSystemApplication
```

### 3. 运行快速测试脚本

#### Windows用户：
```cmd
cd test-scripts
quick-test.bat
```

#### Linux/Mac用户：
```bash
cd test-scripts
chmod +x quick-test.sh
./quick-test.sh
```

## 📁 工具包内容

| 文件名 | 说明 | 用途 |
|--------|------|------|
| `cross-domain-api-test.html` | API自动化测试工具 | 完整的API功能测试 |
| `测试执行指南.md` | 详细测试指南 | 分步骤测试说明 |
| `quick-test.bat` | Windows快速启动脚本 | 一键启动测试环境 |
| `quick-test.sh` | Linux/Mac快速启动脚本 | 一键启动测试环境 |
| `README.md` | 本文件 | 使用说明 |

## 🧪 测试流程概览

### 阶段1：环境验证 ✅
- 检查Java环境
- 验证应用启动
- 确认数据库连接

### 阶段2：API功能测试 🔧
- **域管理API**：注册域、查询域、验证证书
- **信任关系API**：建立信任、检查信任、管理信任
- **跨域认证API**：生成挑战码、验证认证、令牌管理

### 阶段3：前端界面测试 🎨
- 域管理界面功能
- 信任关系管理界面
- 跨域认证界面交互

### 阶段4：端到端流程测试 🔄
- 完整跨域认证流程
- 异常情况处理
- 错误恢复机制

### 阶段5：安全性测试 🔒
- 防重放攻击验证
- 签名验证机制
- 权限控制测试

### 阶段6：性能测试 📊
- 并发请求处理
- 响应时间测量
- 资源使用监控

## 📊 期望的测试结果

### ✅ 应该通过的测试
- 域注册功能
- 域查询功能
- 信任关系建立
- 信任关系查询
- 挑战码生成
- 前端界面交互
- 错误处理机制

### ⚠️ 已知会失败的测试
- **跨域认证验证**：因为使用模拟签名，签名验证会失败（这是正常的）
- **证书验证**：测试域没有真实证书，验证会失败（这是正常的）

## 🔧 详细测试步骤

### 使用API测试工具
1. 打开浏览器访问：`http://localhost:8080/test-scripts/cross-domain-api-test.html`
2. 按顺序点击测试按钮：
   - 注册测试域
   - 获取活跃域
   - 验证证书
   - 建立信任关系
   - 检查信任关系
   - 生成挑战码
   - 运行完整流程

### 使用前端界面
1. 访问：`http://localhost:8080/login.html` 进行登录
2. 访问：`http://localhost:8080/crossdomain.html` 打开跨域认证界面
3. 测试三个标签页的功能：
   - 域管理
   - 信任关系
   - 跨域认证

## 📋 测试检查清单

### 环境验证
- [ ] Java环境正常
- [ ] 应用启动成功
- [ ] 数据库表已创建
- [ ] 端口8080可访问

### API功能测试
- [ ] 域注册API正常
- [ ] 域查询API正常
- [ ] 信任关系API正常
- [ ] 跨域认证API正常

### 前端界面测试
- [ ] 登录页面正常
- [ ] 跨域认证界面加载正常
- [ ] 域管理功能正常
- [ ] 信任关系管理正常
- [ ] 跨域认证交互正常

### 数据验证
- [ ] 数据库中有测试域数据
- [ ] 数据库中有信任关系数据
- [ ] API返回数据格式正确

## 🚨 常见问题解决

### 问题1：应用启动失败
**解决方案：**
- 检查端口8080是否被占用
- 查看数据库配置是否正确
- 确认Java版本是否符合要求

### 问题2：测试工具无法访问
**解决方案：**
- 确认应用已正常启动
- 检查防火墙设置
- 验证URL路径是否正确

### 问题3：API测试失败
**解决方案：**
- 查看浏览器控制台错误信息
- 检查网络连接
- 验证API端点是否正确

### 问题4：数据库相关错误
**解决方案：**
- 检查数据库连接配置
- 确认数据库表是否存在
- 查看应用日志中的错误信息

## 🎯 测试目标

通过这套测试工具包，您应该能够：

1. **验证功能完整性**：确认跨域认证系统的所有核心功能正常工作
2. **检验安全机制**：验证防重放攻击、签名验证等安全特性
3. **测试用户体验**：确保前端界面友好易用
4. **评估系统性能**：了解系统在并发情况下的表现
5. **发现潜在问题**：通过全面测试发现可能的bug和改进点

## 📝 生成测试报告

测试完成后，请参考 `测试执行指南.md` 中的报告模板生成测试报告，包含：
- 测试概要
- 功能测试结果
- 安全测试结果
- 性能测试结果
- 问题清单和改进建议

---

**祝您测试顺利！** 🎉

如果遇到问题，请参考详细的 `测试执行指南.md` 或检查应用日志获取更多信息。 